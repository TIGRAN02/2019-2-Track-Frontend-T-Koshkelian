{"version":3,"sources":["styles/singleMessageStyles.module.scss","styles/imagesStyles.module.scss","styles/profileAndCreateStyles.module.scss","styles/singleChatStyles.module.scss","styles/messageFormStyles.module.scss","images/profilePic.png","styles/emojiStyles.module.scss","styles/chatListStyles.module.scss","styles/headerStyles.module.scss","../node_modules/peerjs/dist sync","constants/ActionTypes.js","reducers/chats.js","reducers/messages.js","reducers/userInfo.js","reducers/typing.js","reducers/index.js","store/index.js","utils/serviceWorker.js","components/Header.js","static/checkAuth.js","static/parseEmoji.js","components/ChatList.js","components/MessageForm.js","components/UserProfile.js","components/WelcomePage.js","components/CreateUser.js","components/CreateChat.js","index.js","styles/welcomePageStyles.module.scss"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","initialState","chats","error","isLoaded","messages","errors","info","rootReducer","combineReducers","state","action","type","types","payload","chatTag","chat","userInfo","inputText","text","createStore","composeWithDevTools","applyMiddleware","thunk","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","Header","backName","rightButton","leftLink","leftImg","rightText","rightImg","name","onRightClick","substring","className","headerStyles","vertical","onClick","imagesStyles","rectangle","leftHorizontal","to","leftButton","horizontal","rightHorizontal","checkAuth","userId","fetch","baseServer","res","json","auth","parseForEmoji","mode","addStyles","parts","split","key","forEach","part","i","arr","emojiList","includes","splice","messageStyles","content_vert","emojiStyles","SingleChat","tag","lastTime","lastMessage","indicator","chatStyles","link","src","profilePic","alt","photo","height","width","last_time","last_message","getDisplayOfLastMessage","lastType","count","length","flag","elem","substr","ChatList","props","Number","params","this","getChats","hash","method","headers","Cookies","get","sort","compareNumber","setState","a","b","aLen","bLen","chatsToDisplay","currChat","chatListStyles","container","event","preventDefault","new_chat_button","new_chat","React","Component","getMedia","stream","constraints","audio","mediaDevices","getUserMedia","MessageForm","value","notMyChannel","emojiOpen","chatStyle","chunks","audioFlag","channel","whose","autoBind","fileManager","createRef","manageFiles","current","click","emojiWindow","makeEmojiWindow","mediaRecorder","centrifuge","peer","conn","currPeerId","firstPeerId","secondPeerId","Peer","on","c","message","addMessage","setTimeout","openConnection","Centrifuge","baseCentrifuge","token","setToken","subscribe","resp","data","status","connect","getMessages","destroy","disconnect","otherPeerId","currMessage","currProps","time","content","mine","yours","style","maxWidth","singleTextMessage","url","background","image","singleImageMessage","controls","singleAudioMessage","geolocation","getCurrentPosition","position","coords","latitude","longitude","toSend","sendTextMessage","curr","Date","getHours","getMinutes","send","body","JSON","stringify","chat_tag","user_id","target","files","URL","createObjectURL","fileName","sendImageMessage","onload","revokeObjectURL","upload","handleImageSubmit","toAssign","push","blob","Blob","audioURL","sendAudioMessage","MediaRecorder","ondataavailable","dataAvailable","onstop","stopRecording","start","alert","stop","border","dataTransfer","outerArray","n","Math","min","sqrt","innerArray","j","stopPropagation","concat","emoji_window","formInput","formStyles","multiple","accept","display","ref","onChange","handleImageChange","attachment","img","sendGeo","placeholder","input","handleTextChange","cowboy_hat_face","voice","handleEndRecording","handleStartRecording","form","onSubmit","handleTextSubmit","the_chat","onDragEnter","handleDragEnter","onDragLeave","handleDragLeave","onDragOver","handleDragOver","onDrop","handleDrop","empty","UserProfile","initialUserName","initialUserTag","initialUserBio","currentUserName","currentUserTag","currentUserBio","oldPassword","newPassword","changePassword","isTick","user","bio","old_tag","ok","forPassChange","old_password","new_password","result","temp","passwordForm","containerStyles","profileStyles","profileAnim","nameInputClasses","inputName","tagInputClasses","inputTag","bioInputClasses","inputBio","passwordTextClasses","interactiveText","flexGrow","inputPassword","handleChangOldPassword","bind","handleChangNewPassword","openPasswordForm","onTickClick","horizontalPhoto","handleChangeName","handleChangeTag","handleChangeBio","WelcomePage","messageType","password","passwordInput","csrfToken","document","cookie","welcomePageStyles","focus","handleAuth","csrftoken","csrfmiddlewaretoken","Promise","reject","vert","horiz","curr_message","getMessage","handleTagSubmit","handleTagChange","handlePasswordChange","create","CreateUser","userName","userTag","userBio","firstPassword","secondPassword","isPasswordForm","isTagForm","string","textClasses","handleChangeFirstPassword","handleChangeSecondPassword","margin","openTagForm","setTick","createUserAnim","profilePicSizeChatList","getTagForm","getPasswordForm","CreateChat","chatName","chatBio","chatMembers","isNameForm","isInfoForm","isMembersForm","isChannel","creator","members","is_channel","realTag","replace","tagForm","nameForm","membersForm","mainPart","createChatAnim","marginBottom","openNameForm","handleChangeMembers","openMemberForm","onFillInfo","alignSelf","marginTop","onCreate","Sentry","dsn","render","store","basename","exact","path","component","getElementById","process","href","origin","addEventListener","response","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.3c45280a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mine\":\"singleMessageStyles_mine__2aeSr\",\"yours\":\"singleMessageStyles_yours__xV5-S\",\"time\":\"singleMessageStyles_time__1j9xx\",\"content_vert\":\"singleMessageStyles_content_vert__LdcFu\",\"content\":\"singleMessageStyles_content__E28if\",\"image\":\"singleMessageStyles_image__3_Eoq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attachment\":\"imagesStyles_attachment__1zRo5\",\"geolocation\":\"imagesStyles_geolocation__EsXcY\",\"cowboy_hat_face\":\"imagesStyles_cowboy_hat_face__1Io0i\",\"voice\":\"imagesStyles_voice__1RXmK\",\"stopRecording\":\"imagesStyles_stopRecording__1tbnc\",\"tick\":\"imagesStyles_tick__13B3E\",\"back\":\"imagesStyles_back__EosuP\",\"burger\":\"imagesStyles_burger__3U2Vg\",\"new_chat\":\"imagesStyles_new_chat__20Qu-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profileAndCreateStyles_container__3WU5q\",\"profileAnim\":\"profileAndCreateStyles_profileAnim__1R1xV\",\"slideFromAbove\":\"profileAndCreateStyles_slideFromAbove__XAaOy\",\"createUserAnim\":\"profileAndCreateStyles_createUserAnim__2cpz5\",\"slideFromRight\":\"profileAndCreateStyles_slideFromRight__3OldG\",\"createChatAnim\":\"profileAndCreateStyles_createChatAnim__THySc\",\"slideFromBelow\":\"profileAndCreateStyles_slideFromBelow__1VYoh\",\"horizontal\":\"profileAndCreateStyles_horizontal__3UIDs\",\"vertical\":\"profileAndCreateStyles_vertical__13BM9\",\"horizontalPhoto\":\"profileAndCreateStyles_horizontalPhoto__15E4-\",\"photo\":\"profileAndCreateStyles_photo__3vvty\",\"pic\":\"profileAndCreateStyles_pic__3GBuI\",\"input\":\"profileAndCreateStyles_input__1WZxj\",\"inputName\":\"profileAndCreateStyles_inputName__2H0Zf\",\"inputTag\":\"profileAndCreateStyles_inputTag__3LDrv\",\"inputBio\":\"profileAndCreateStyles_inputBio__1rXNR\",\"inputPassword\":\"profileAndCreateStyles_inputPassword__EEdyc\",\"interactiveText\":\"profileAndCreateStyles_interactiveText__3zJYf\",\"empty\":\"profileAndCreateStyles_empty__CIK5o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"singleChatStyles_link__2-lDM\",\"chat\":\"singleChatStyles_chat__1KUVU\",\"photo\":\"singleChatStyles_photo__NC_8L\",\"vertical\":\"singleChatStyles_vertical__3mvs3\",\"horizontal\":\"singleChatStyles_horizontal__EG8om\",\"name\":\"singleChatStyles_name__Gv2R6\",\"last_time\":\"singleChatStyles_last_time__1JqgL\",\"last_message\":\"singleChatStyles_last_message__Dnuoe\",\"indicator\":\"singleChatStyles_indicator__TGwpK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"messageFormStyles_form__3DsTf\",\"slideFromRight\":\"messageFormStyles_slideFromRight__3UAes\",\"the_chat\":\"messageFormStyles_the_chat__dTIsF\",\"empty\":\"messageFormStyles_empty__3K6BC\",\"curr_message\":\"messageFormStyles_curr_message__3qZMn\",\"horizontal\":\"messageFormStyles_horizontal__1qqDE\",\"input\":\"messageFormStyles_input__35_YK\",\"img\":\"messageFormStyles_img__2CBPs\"};","module.exports = __webpack_public_path__ + \"static/media/profilePic.ad60b068.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"amphora_in_message\":\"emojiStyles_amphora_in_message__24FSZ\",\"amphora_in_chat\":\"emojiStyles_amphora_in_chat__1Yahl\",\"amphora_in_menu\":\"emojiStyles_amphora_in_menu__tXs0B\",\"avocado_in_message\":\"emojiStyles_avocado_in_message__24YvF\",\"avocado_in_chat\":\"emojiStyles_avocado_in_chat__8Ggl-\",\"avocado_in_menu\":\"emojiStyles_avocado_in_menu__2UzZ5\",\"baby_chick_in_message\":\"emojiStyles_baby_chick_in_message__2ts4g\",\"baby_chick_in_chat\":\"emojiStyles_baby_chick_in_chat__3mUGH\",\"baby_chick_in_menu\":\"emojiStyles_baby_chick_in_menu__B_iDp\",\"balloon_in_message\":\"emojiStyles_balloon_in_message__3sxY1\",\"balloon_in_chat\":\"emojiStyles_balloon_in_chat__30QIw\",\"balloon_in_menu\":\"emojiStyles_balloon_in_menu__3EvVv\",\"boar_in_message\":\"emojiStyles_boar_in_message__zuVBJ\",\"boar_in_chat\":\"emojiStyles_boar_in_chat__RBFcJ\",\"boar_in_menu\":\"emojiStyles_boar_in_menu__1VgNc\",\"butterfly_in_message\":\"emojiStyles_butterfly_in_message__p8A44\",\"butterfly_in_chat\":\"emojiStyles_butterfly_in_chat__cqifC\",\"butterfly_in_menu\":\"emojiStyles_butterfly_in_menu__1Nm4v\",\"coffin_in_message\":\"emojiStyles_coffin_in_message__27zmu\",\"coffin_in_chat\":\"emojiStyles_coffin_in_chat__3S8D-\",\"coffin_in_menu\":\"emojiStyles_coffin_in_menu__1oMzN\",\"crying_face_in_message\":\"emojiStyles_crying_face_in_message__3mXXu\",\"crying_face_in_chat\":\"emojiStyles_crying_face_in_chat__SxI_Q\",\"crying_face_in_menu\":\"emojiStyles_crying_face_in_menu__3R4t7\",\"door_in_message\":\"emojiStyles_door_in_message__3e_a8\",\"door_in_chat\":\"emojiStyles_door_in_chat__2MT5n\",\"door_in_menu\":\"emojiStyles_door_in_menu__WJXBk\",\"face_blowing_a_kiss_in_message\":\"emojiStyles_face_blowing_a_kiss_in_message__2U376\",\"face_blowing_a_kiss_in_chat\":\"emojiStyles_face_blowing_a_kiss_in_chat__2gtOV\",\"face_blowing_a_kiss_in_menu\":\"emojiStyles_face_blowing_a_kiss_in_menu__1ESQa\",\"face_with_medical_mask_in_message\":\"emojiStyles_face_with_medical_mask_in_message__3Il2B\",\"face_with_medical_mask_in_chat\":\"emojiStyles_face_with_medical_mask_in_chat__EjFOv\",\"face_with_medical_mask_in_menu\":\"emojiStyles_face_with_medical_mask_in_menu__1pjaG\",\"face_with_rolling_eyes_in_message\":\"emojiStyles_face_with_rolling_eyes_in_message__uGc_I\",\"face_with_rolling_eyes_in_chat\":\"emojiStyles_face_with_rolling_eyes_in_chat__1o8WU\",\"face_with_rolling_eyes_in_menu\":\"emojiStyles_face_with_rolling_eyes_in_menu__2nY50\",\"love_you_gesture_in_message\":\"emojiStyles_love_you_gesture_in_message__1G7JX\",\"love_you_gesture_in_chat\":\"emojiStyles_love_you_gesture_in_chat__fnmbp\",\"love_you_gesture_in_menu\":\"emojiStyles_love_you_gesture_in_menu__1BF6s\",\"thumbs_up_in_message\":\"emojiStyles_thumbs_up_in_message__1cBi1\",\"thumbs_up_in_chat\":\"emojiStyles_thumbs_up_in_chat__3jJq6\",\"thumbs_up_in_menu\":\"emojiStyles_thumbs_up_in_menu__WEgeT\",\"thumbs_down_in_message\":\"emojiStyles_thumbs_down_in_message__UUD72\",\"thumbs_down_in_chat\":\"emojiStyles_thumbs_down_in_chat__3a-5-\",\"thumbs_down_in_menu\":\"emojiStyles_thumbs_down_in_menu__1XQCm\",\"victory_hand_in_message\":\"emojiStyles_victory_hand_in_message__2o-bV\",\"victory_hand_in_chat\":\"emojiStyles_victory_hand_in_chat__3no8h\",\"victory_hand_in_menu\":\"emojiStyles_victory_hand_in_menu__3AOZh\",\"emoji_window\":\"emojiStyles_emoji_window__3fwTF\",\"horizontal\":\"emojiStyles_horizontal__yxhVg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"chatListStyles_container__3L2LZ\",\"slideFromLeft\":\"chatListStyles_slideFromLeft__22HuI\",\"chats\":\"chatListStyles_chats__1I7K9\",\"new_chat_button\":\"chatListStyles_new_chat_button__4bz_x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rectangle\":\"headerStyles_rectangle__3ijfR\",\"leftHorizontal\":\"headerStyles_leftHorizontal__1r8jT\",\"rightHorizontal\":\"headerStyles_rightHorizontal__tJnYo\",\"leftButton\":\"headerStyles_leftButton__2YKvq\",\"rightButton\":\"headerStyles_rightButton__NZSqS\",\"vertical\":\"headerStyles_vertical__HH6d5\",\"horizontal\":\"headerStyles_horizontal__3wWJR\",\"name\":\"headerStyles_name__pzbgF\",\"text\":\"headerStyles_text__3zlfI\",\"emptyMiddle\":\"headerStyles_emptyMiddle__xpw9E\"};","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 74;","export default {\n  MESSAGES_SUCCESS: 'successfully fetched messages',\n  MESSAGES_ERROR: 'error fetching messages',\n  CHATS_SUCCESS: 'successfully fetched chat info',\n  CHATS_ERROR: 'error fetching chat info',\n  USER_SUCCESS: 'successfully fetched user info',\n  USER_ERROR: 'error fetching user info',\n  CHANGE_MESSAGE: 'typing new message',\n}\n","import types from '../constants/ActionTypes'\n\nconst initialState = {\n  chats: {},\n  error: null,\n  isLoaded: false,\n}\n\nexport const chats = (state = initialState, action) => {\n  switch (action.type) {\n    case types.CHATS_SUCCESS:\n      return {\n        ...state,\n        chats: action.payload,\n        isLoaded: true,\n      }\n    case types.CHATS_ERROR:\n      return {\n        ...state,\n        error: action.payload.error,\n      }\n    default:\n      return state\n  }\n}\n","import types from '../constants/ActionTypes'\n\nconst initialState = {\n  messages: {},\n  errors: {},\n  isLoaded: false,\n}\n\nexport const messages = (state = initialState, action) => {\n  switch (action.type) {\n    case types.MESSAGES_SUCCESS:\n      return {\n        messages: {\n          ...state.messages,\n          [action.chatTag]: [...(state.messages[action.chatTag] || []), ...action.payload],\n        },\n        errors: {\n          ...state.errors,\n          [action.chat]: null,\n        },\n        isLoaded: true,\n      }\n    case types.MESSAGES_ERROR:\n      return {\n        messages: {\n          ...state.messages,\n        },\n        errors: {\n          ...state.errors,\n          [action.chat]: action.payload.error,\n        },\n      }\n    default:\n      return state\n  }\n}\n","import types from '../constants/ActionTypes'\n\nconst initialState = {\n  info: {},\n  isLoaded: false,\n  error: null,\n}\n\nexport const userInfo = (state = initialState, action) => {\n  switch (action.type) {\n    case types.USER_SUCCESS:\n      return {\n        ...state,\n        isLoaded: true,\n        info: {\n          ...state.info,\n          ...action.payload,\n        },\n      }\n    case types.USER_ERROR:\n      return {\n        ...state,\n        error: action.payload.error,\n      }\n    default:\n      return state\n  }\n}\n","import types from '../constants/ActionTypes'\n\nconst initialState = {}\n\nexport const inputText = (state = initialState, action) => {\n  if (action.type === types.CHANGE_MESSAGE) {\n    return {\n      ...state,\n      [action.chat]: {\n        text: action.payload,\n      },\n    }\n  }\n\n  return state\n}\n","import { combineReducers } from 'redux'\nimport { chats } from './chats'\nimport { messages } from './messages'\n// eslint-disable-next-line import/named\nimport { userInfo } from './userInfo'\n// eslint-disable-next-line import/named\nimport { inputText } from './typing'\n\nconst rootReducer = combineReducers({\n  chats,\n  messages,\n  userInfo,\n  inputText,\n})\n\nexport default rootReducer\n","// const { default: store } = process.env.NODE_ENV === 'production' ? require('./storeProd') : require('./storeDev')\n\n// Exporting the store, then use it anywhere like store.getState() or store.dispatch()\n// module.exports = store()\n\nimport { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\nimport rootReducer from '../reducers/index'\n\nexport default createStore(rootReducer, composeWithDevTools({})(applyMiddleware(thunk)))\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n/* eslint no-console: 0 */\n/* eslint no-param-reassign: 0 */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport headerStyles from '../styles/headerStyles.module.scss'\nimport imagesStyles from '../styles/imagesStyles.module.scss'\n\nfunction Header({ leftLink, leftImg, rightText, rightImg, name, onRightClick }) {\n  let backName\n  let rightButton\n  if (leftLink.substring(0, 9) === '/ChatList') {\n    backName = (\n      <div className={headerStyles.vertical}>\n        <div className={headerStyles.text}>Chats</div>\n      </div>\n    )\n  } else if (leftLink === '/') {\n    backName = (\n      <div className={headerStyles.vertical}>\n        <div className={headerStyles.text}>Home</div>\n      </div>\n    )\n  }\n  if (rightImg !== '') {\n    rightButton = (\n      <div className={headerStyles.rightButton} onClick={onRightClick}>\n        <div className={headerStyles.vertical}>\n          <div className={`${imagesStyles[rightImg]}`} />\n        </div>\n      </div>\n    )\n  } else if (rightText !== '') {\n    rightButton = (\n      <div className={headerStyles.rightButton} onClick={onRightClick}>\n        <div className={headerStyles.vertical}>\n          <div className={headerStyles.text}>{rightText}</div>\n        </div>\n      </div>\n    )\n  }\n  return (\n    <div className={headerStyles.rectangle}>\n      <div className={headerStyles.leftHorizontal}>\n        <Link to={leftLink} className={headerStyles.leftButton}>\n          <div className={headerStyles.vertical}>\n            <div className={`${imagesStyles[leftImg]}`} />\n          </div>\n          {backName}\n        </Link>\n      </div>\n      <div className={headerStyles.horizontal}>\n        <div className={headerStyles.vertical}>\n          <div className={headerStyles.name}>{name}</div>\n        </div>\n      </div>\n      <div className={headerStyles.rightHorizontal}>{rightButton}</div>\n    </div>\n  )\n}\n\nHeader.propTypes = {\n  leftLink: PropTypes.string.isRequired,\n  leftImg: PropTypes.string.isRequired,\n  rightText: PropTypes.string.isRequired,\n  rightImg: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onRightClick: PropTypes.func.isRequired,\n}\n\nexport default Header\n","import { baseServer } from '../settings'\n\nexport default function checkAuth(userId) {\n  return fetch(`${baseServer}/users/check_auth/?id=${userId}`).then((res) =>\n    res.json().then(({ auth }) => {\n      return auth\n    }),\n  )\n}\n","import React from 'react'\nimport { emojiList } from '../settings'\nimport messageStyles from '../styles/singleMessageStyles.module.scss'\nimport emojiStyles from '../styles/emojiStyles.module.scss'\n\nexport default function parseForEmoji(text, mode) {\n  const parts = text.split(':')\n  let key = 0\n  let addStyles\n  switch (mode) {\n    case 0: {\n      addStyles = '_in_message'\n      break\n    }\n    case 1: {\n      addStyles = '_in_chat'\n      break\n    }\n    default: {\n      addStyles = null\n    }\n  }\n  parts.forEach((part, i, arr) => {\n    if (emojiList.includes(part)) {\n      arr.splice(\n        i,\n        1,\n        // eslint-disable-next-line react/no-array-index-key\n        <div key={key} className={messageStyles.content_vert}>\n          <div className={`${emojiStyles[`${part}${addStyles}`]}`} />\n        </div>,\n      )\n    } else {\n      arr.splice(\n        i,\n        1,\n        <div key={key} className={messageStyles.content_vert}>\n          {part}\n        </div>,\n      )\n    }\n    key += 1\n  })\n  return parts\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport Cookies from 'js-cookie'\nimport Header from './Header'\nimport { baseServer } from '../settings'\nimport profilePic from '../images/profilePic.png'\nimport chatStyles from '../styles/singleChatStyles.module.scss'\nimport chatListStyles from '../styles/chatListStyles.module.scss'\nimport imagesStyles from '../styles/imagesStyles.module.scss'\nimport checkAuth from '../static/checkAuth'\nimport parseForEmoji from '../static/parseEmoji'\n\nfunction SingleChat({ name, tag, userId, lastTime, lastMessage, indicator, key }) {\n  return (\n    <div key={key}>\n      <Link to={`/MessageForm/${tag}/${name}/${userId}`} className={chatStyles.link}>\n        <div className={chatStyles.chat}>\n          <img src={profilePic} alt=\"\" className={chatStyles.photo} height=\"100px\" width=\"height\" />\n          <div className={chatStyles.vertical}>\n            <div className={chatStyles.horizontal}>\n              <div className={chatStyles.name}>{name}</div>\n              <div className={chatStyles.last_time}>{lastTime}</div>\n            </div>\n            <div className={chatStyles.horizontal}>\n              <div className={chatStyles.last_message}>{parseForEmoji(lastMessage, 1)}</div>\n              <div className={chatStyles.indicator}>{indicator}</div>\n            </div>\n          </div>\n        </div>\n      </Link>\n      <hr />\n    </div>\n  )\n}\n\nSingleChat.propTypes = {\n  name: PropTypes.string.isRequired,\n  tag: PropTypes.string.isRequired,\n  userId: PropTypes.number.isRequired,\n  lastTime: PropTypes.string.isRequired,\n  lastMessage: PropTypes.string.isRequired,\n  indicator: PropTypes.string.isRequired,\n  key: PropTypes.number.isRequired,\n}\n\nfunction getDisplayOfLastMessage({ lastMessage, lastType }) {\n  // what to display as last message (may be too long or not text)\n  let res = ''\n  if (lastType === 'text') {\n    const arr = lastMessage.split(' ')\n    let count = arr[0].length\n    let flag = false\n    for (const elem of arr) {\n      if (count >= 100) {\n        flag = true\n        break\n      }\n      res += `${elem} `\n      count += elem.length\n    }\n    res = res.substr(0, res.length - 1)\n    if (flag) {\n      res += '...' // last message too long to fully be displayed\n    }\n  } else {\n    res = lastType\n  }\n\n  return res\n}\n\nclass ChatList extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      userId: Number(this.props.match.params.userId),\n      chats: [],\n    }\n  }\n\n  componentDidMount() {\n    checkAuth(this.state.userId).then((auth) => {\n      if (!auth) {\n        window.location.hash = '#/'\n      } else {\n        this.getChats()\n      }\n    })\n  }\n\n  getChats() {\n    fetch(`${baseServer}/chats/chat_list/?id=${this.state.userId}`, {\n      method: 'GET',\n      headers: {\n        'X-CSRFToken': Cookies.get('csrftoken'),\n      },\n    })\n      .then((res) => res.json())\n      .then(({ chats }) => {\n        chats.sort(this.compareNumber)\n        this.setState({ chats })\n      })\n  }\n\n  compareNumber(a, b) {\n    const aLen = a.indicator\n    const bLen = b.indicator\n    if (aLen > bLen) {\n      return -1\n    }\n    if (aLen === bLen) {\n      return 0\n    }\n    if (aLen < bLen) {\n      return 1\n    }\n    return 0\n  }\n\n  render() {\n    let chatsToDisplay = []\n    let i = 0\n    for (const chat of this.state.chats) {\n      chat.key = i\n      i += 1\n      chat.lastMessage = getDisplayOfLastMessage(chat)\n      chat.userId = this.state.userId\n      const currChat = SingleChat(chat)\n      chatsToDisplay = [...chatsToDisplay, currChat]\n    }\n\n    return (\n      <div className={chatListStyles.container}>\n        <Header\n          leftImg=\"burger\"\n          leftLink={`/UserProfile/${this.state.userId}`}\n          rightImg=\"\"\n          rightText=\"Exit\"\n          name=\"Hummingbird\"\n          onRightClick={(event) => {\n            event.preventDefault()\n            fetch(`${baseServer}/users/logout/?id=${this.state.userId}`)\n              .then((res) => res.json())\n              .then(() => {\n                window.location.hash = '#/'\n              })\n          }}\n        />\n        <div className={chatListStyles.chats}>{chatsToDisplay}</div>\n        <Link to={`/CreateChat/${this.state.userId}`} className={chatListStyles.new_chat_button}>\n          <div className={`${imagesStyles.new_chat} ${chatListStyles.new_chat_button}`} />\n        </Link>\n      </div>\n    )\n  }\n}\n\nChatList.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  match: PropTypes.object.isRequired,\n}\n\nexport default ChatList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport autoBind from 'react-autobind'\nimport Cookies from 'js-cookie'\nimport Centrifuge from 'centrifuge'\nimport Peer from 'peerjs'\nimport Header from './Header'\nimport { baseServer, baseCentrifuge, firstPeerId, secondPeerId, emojiList } from '../settings'\nimport messageStyles from '../styles/singleMessageStyles.module.scss'\nimport formStyles from '../styles/messageFormStyles.module.scss'\nimport emojiStyles from '../styles/emojiStyles.module.scss'\nimport imagesStyles from '../styles/imagesStyles.module.scss'\nimport checkAuth from '../static/checkAuth'\nimport parseForEmoji from '../static/parseEmoji'\n\nfunction singleTextMessage({ userId, content, time, whose, key }) {\n  return (\n    <div className={whose === userId ? messageStyles.mine : messageStyles.yours} style={{ maxWidth: '75%' }} key={key}>\n      <div className={messageStyles.content}>{parseForEmoji(content, 0)}</div>\n      <div className={messageStyles.time}>{time}</div>\n    </div>\n  )\n}\n\nsingleTextMessage.propTypes = {\n  userId: PropTypes.number.isRequired,\n  content: PropTypes.string.isRequired,\n  time: PropTypes.string.isRequired,\n  whose: PropTypes.string.isRequired,\n  key: PropTypes.number.isRequired,\n}\n\nfunction singleImageMessage({ userId, url, time, whose, key }) {\n  return (\n    <div\n      className={whose === userId ? messageStyles.mine : messageStyles.yours}\n      style={{ background: 'rgb(40, 40, 40)' }}\n      key={key}\n    >\n      <img src={url} className={messageStyles.image} alt=\"blob was deleted\" />\n      <div className={messageStyles.time}>{time}</div>\n    </div>\n  )\n}\n\nsingleImageMessage.propTypes = {\n  userId: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired,\n  time: PropTypes.string.isRequired,\n  whose: PropTypes.string.isRequired,\n  key: PropTypes.number.isRequired,\n}\n\nfunction singleAudioMessage({ userId, url, time, whose, key }) {\n  return (\n    <div\n      className={whose === userId ? messageStyles.mine : messageStyles.yours}\n      style={{ width: '30%', background: 'rgb(40, 40, 40)' }}\n      key={key}\n    >\n      <audio src={url} style={{ width: '100%' }} controls />\n      <div className={messageStyles.time}>{time}</div>\n    </div>\n  )\n}\n\nsingleAudioMessage.propTypes = {\n  userId: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired,\n  time: PropTypes.string.isRequired,\n  whose: PropTypes.string.isRequired,\n  key: PropTypes.number.isRequired,\n}\n\nasync function getMedia() {\n  let stream = null\n\n  const constraints = { audio: true }\n  stream = await navigator.mediaDevices.getUserMedia(constraints)\n\n  return stream\n}\n\nclass MessageForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: '',\n      name: this.props.match.params.name,\n      tag: this.props.match.params.tag,\n      userId: Number(this.props.match.params.userId),\n      notMyChannel: true,\n      emojiOpen: false,\n      chatStyle: {},\n      messages: [],\n      chunks: [],\n      audioFlag: false,\n    }\n\n    fetch(`${baseServer}/chats/chat_detail/?tag=${this.state.tag}`)\n      .then((res) => res.json())\n      .then(({ chat }) => {\n        if (!chat[0].channel || chat[0].whose === this.state.userId) {\n          this.setState({ notMyChannel: false })\n        }\n      })\n\n    autoBind(this)\n\n    this.fileManager = React.createRef()\n    this.messages = React.createRef()\n    this.manageFiles = () => this.fileManager.current.click()\n\n    this.emojiWindow = this.makeEmojiWindow()\n\n    this.mediaRecorder = null\n    this.centrifuge = null\n    this.peer = null\n    this.conn = null\n  }\n\n  componentDidMount() {\n    checkAuth(this.state.userId).then((auth) => {\n      if (!auth) {\n        window.location.hash = '#/'\n      } else if (this.state.tag.includes('peerjs')) {\n        const currPeerId = this.state.userId === 1 ? firstPeerId : secondPeerId\n        this.peer = new Peer(currPeerId)\n        this.peer.on('open', () => {\n          this.peer.on('close', () => {\n            this.conn = null\n          })\n\n          this.peer.on('connection', (c) => {\n            if (!this.conn) {\n              this.conn = c\n              this.conn.on('open', () => {\n                this.conn.on('data', (message) => {\n                  this.addMessage(message, this.state.messages.length + 1)\n                })\n              })\n            }\n          })\n\n          setTimeout(this.openConnection, 1000)\n        })\n      } else {\n        this.centrifuge = new Centrifuge(baseCentrifuge)\n        fetch(`${baseServer}/centrifugo/?id=${this.state.userId}`)\n          .then((res) => res.json())\n          .then(({ token }) => {\n            this.centrifuge.setToken(token)\n            this.centrifuge.subscribe(`chat:${this.state.tag}`, (resp) => {\n              if (resp.data.status === 'ok') {\n                this.addMessage(resp.data.message, this.state.messages.length + 1)\n              }\n            })\n            this.centrifuge.connect()\n          })\n        this.getMessages(this.state.tag)\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    if (this.state.tag.includes('peerjs')) {\n      this.peer.destroy()\n      this.conn = null\n    } else {\n      this.centrifuge.disconnect()\n      this.centrifuge = null\n    }\n  }\n\n  // _____________connections_______________\n\n  openConnection() {\n    if (!this.conn) {\n      const otherPeerId = this.state.userId === 1 ? secondPeerId : firstPeerId\n      this.conn = this.peer.connect(otherPeerId)\n      this.conn.on('open', () => {\n        this.conn.on('data', (message) => {\n          this.addMessage(message, this.state.messages.length + 1)\n        })\n      })\n    }\n  }\n\n  // ______________messages_________________\n\n  getMessages(tag) {\n    fetch(`${baseServer}/chats/chat/?tag=${tag}`)\n      .then((res) => res.json())\n      .then((data) => {\n        const { messages } = data\n        const count = messages.length - this.state.messages.length - 1\n        for (let i = count; i >= 0; i -= 1) {\n          this.addMessage(messages[i], messages.length - i)\n        }\n      })\n  }\n\n  addMessage(message, key) {\n    const currProps = {}\n    currProps.time = message.time\n    currProps.whose = message.whose\n    currProps.userId = this.state.userId\n    currProps.key = key\n    let currMessage\n    if (message.type === 'text') {\n      currProps.content = message.content\n      currMessage = singleTextMessage(currProps)\n    } else {\n      currProps.url = message.url\n      if (message.type === 'image') {\n        currMessage = singleImageMessage(currProps)\n      } else {\n        currMessage = singleAudioMessage(currProps)\n      }\n    }\n    this.setState((state) => {\n      return { messages: [currMessage, ...state.messages] }\n    })\n  }\n\n  // _____________geolocation_______________\n\n  sendGeo(event) {\n    event.preventDefault()\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const { latitude, longitude } = position.coords\n        const toSend = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`\n        this.sendTextMessage(toSend)\n      })\n    }\n  }\n\n  // _______________texts____________________\n\n  sendTextMessage(content) {\n    if (this.state.tag.includes('peerjs')) {\n      const curr = new Date()\n      const message = {\n        whose: this.state.userId,\n        time: `${curr.getHours()}:${curr.getMinutes()}`,\n        type: 'text',\n        content,\n      }\n      this.conn.send(message)\n      this.addMessage(message, this.state.messages.length + 1)\n    } else {\n      fetch(`${baseServer}/chats/send_message/`, {\n        method: 'POST',\n        body: JSON.stringify({ chat_tag: this.state.tag, user_id: this.state.userId, type: 'text', content }),\n        headers: {\n          'X-CSRFToken': Cookies.get('csrftoken'),\n          'Content-Type': 'application/json',\n        },\n      }).then(() => {})\n    }\n  }\n\n  handleTextSubmit(event) {\n    event.preventDefault()\n    if (this.state.value !== '') {\n      this.sendTextMessage(this.state.value)\n      this.setState({ value: '' })\n    }\n  }\n\n  handleTextChange(event) {\n    event.preventDefault()\n    this.setState({ value: event.target.value })\n  }\n\n  // _______________images__________________\n\n  sendImageMessage(url) {\n    if (this.state.tag.includes('peerjs')) {\n      const curr = new Date()\n      const message = {\n        whose: this.state.userId,\n        time: `${curr.getHours()}:${curr.getMinutes()}`,\n        type: 'image',\n        url,\n      }\n      this.conn.send(message)\n    } else {\n      fetch(`${baseServer}/chats/send_message/`, {\n        method: 'POST',\n        body: JSON.stringify({ chat_tag: this.state.tag, user_id: this.state.userId, type: 'image', url }),\n        headers: {\n          'X-CSRFToken': Cookies.get('csrftoken'),\n          'Content-Type': 'application/json',\n        },\n      }).then(() => {})\n    }\n  }\n\n  handleImageSubmit(files) {\n    if (files && files.length) {\n      for (let i = 0; i < files.length; i += 1) {\n        const src = window.URL.createObjectURL(files[i])\n        const fileName = files[i].name\n\n        this.sendImageMessage(src, fileName)\n        this.messages.current.onload = () => {\n          window.URL.revokeObjectURL(src)\n        }\n      }\n    }\n  }\n\n  handleImageChange(event) {\n    event.preventDefault()\n    const upload = this.fileManager.current.files\n    this.handleImageSubmit(upload)\n  }\n\n  // _______________audio____________________\n\n  sendAudioMessage(url) {\n    if (this.state.tag.includes('peerjs')) {\n      const curr = new Date()\n      const message = {\n        whose: this.state.userId,\n        time: `${curr.getHours()}:${curr.getMinutes()}`,\n        type: 'audio',\n        url,\n      }\n      this.conn.send(message)\n    } else {\n      fetch(`${baseServer}/chats/send_message/`, {\n        method: 'POST',\n        body: JSON.stringify({ chat_tag: this.state.tag, user_id: this.state.userId, type: 'audio', url }),\n        headers: {\n          'X-CSRFToken': Cookies.get('csrftoken'),\n          'Content-Type': 'application/json',\n        },\n      }).then(() => {})\n    }\n  }\n\n  dataAvailable(event) {\n    event.preventDefault()\n    const toAssign = this.state.chunks\n    toAssign.push(event.data)\n    this.setState((state) => {\n      return { chunks: toAssign }\n    })\n  }\n\n  stopRecording(event) {\n    this.setState({ audioFlag: false })\n\n    const blob = new Blob(this.state.chunks, { type: 'audio/ogg; codecs=opus' })\n    this.setState({ chunks: [] })\n\n    const audioURL = URL.createObjectURL(blob)\n\n    this.sendAudioMessage(audioURL)\n    this.messages.current.onload = () => {\n      window.URL.revokeObjectURL(audioURL)\n    }\n  }\n\n  async handleStartRecording(event) {\n    event.preventDefault()\n\n    try {\n      const stream = await getMedia()\n      this.mediaRecorder = new MediaRecorder(stream)\n      this.setState({ chunks: [] })\n      this.mediaRecorder.ondataavailable = this.dataAvailable\n      this.mediaRecorder.onstop = this.stopRecording\n\n      this.setState({ audioFlag: true })\n      this.mediaRecorder.start()\n    } catch (e) {\n      // eslint-disable-next-line no-alert\n      alert('Unable to record audio')\n    }\n  }\n\n  handleEndRecording(event) {\n    this.mediaRecorder.stop()\n  }\n\n  // _______________D&D______________________\n\n  handleDragEnter(event) {\n    event.preventDefault()\n    this.setState({\n      chatStyle: {\n        border: '2px dashed rgb(255, 255, 255)',\n      },\n    })\n  }\n\n  handleDragLeave(event) {\n    event.preventDefault()\n    this.setState({ chatStyle: {} })\n  }\n\n  handleDragOver(event) {\n    event.preventDefault()\n  }\n\n  handleDrop(event) {\n    event.preventDefault()\n    const upload = event.dataTransfer.files\n    this.handleImageSubmit(upload)\n    this.setState({ chatStyle: {} })\n  }\n\n  // ______________render____________________\n\n  makeEmojiWindow() {\n    const outerArray = []\n    const n = Math.min(Math.sqrt(emojiList.length), 10)\n    for (let i = 0; i < n; i += 1) {\n      const innerArray = []\n      for (let j = 0; j < n; j += 1) {\n        innerArray.push(\n          <div\n            key={j}\n            className={`${emojiStyles[`${emojiList[i * n + j]}_in_menu`]}`}\n            onClick={(event) => {\n              event.stopPropagation()\n              this.setState((state) => {\n                return { value: state.value.concat(`:${emojiList[i * n + j]}:`) }\n              })\n              return false\n            }}\n          />,\n        )\n      }\n      outerArray.push(\n        <div key={i} className={emojiStyles.horizontal}>\n          {innerArray}\n        </div>,\n      )\n    }\n    return <div className={emojiStyles.emoji_window}>{outerArray}</div>\n  }\n\n  render() {\n    let formInput = null\n    let emojiWindow = null\n\n    if (this.state.emojiOpen) {\n      emojiWindow = this.emojiWindow\n    }\n\n    if (!this.state.notMyChannel) {\n      formInput = (\n        <div className={formStyles.horizontal}>\n          <input\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            style={{ display: 'none' }}\n            ref={this.fileManager}\n            onChange={this.handleImageChange}\n          />\n          <div\n            className={`${imagesStyles.attachment} ${formStyles.img}`}\n            style={{ maxWidth: '40px' }}\n            onClick={this.manageFiles}\n          />\n          <div\n            className={`${imagesStyles.geolocation} ${formStyles.img}`}\n            style={{ maxWidth: '29px' }}\n            onClick={this.sendGeo}\n          />\n          <input\n            type=\"text\"\n            value={this.state.value}\n            placeholder=\"Your message\"\n            className={formStyles.input}\n            onChange={this.handleTextChange}\n          />\n          <div\n            className={`${imagesStyles.cowboy_hat_face} ${formStyles.img}`}\n            style={{ maxWidth: '50px' }}\n            onClick={(event) => {\n              event.stopPropagation()\n              this.setState((state) => {\n                return { emojiOpen: !state.emojiOpen }\n              })\n              return false\n            }}\n          />\n          <div\n            className={\n              this.state.audioFlag\n                ? `${imagesStyles.stopRecording} ${formStyles.img}`\n                : `${imagesStyles.voice} ${formStyles.img}`\n            }\n            style={{ maxWidth: '29px' }}\n            onClick={this.state.audioFlag ? this.handleEndRecording : this.handleStartRecording}\n          />\n        </div>\n      )\n    }\n\n    return (\n      <form\n        className={formStyles.form}\n        onSubmit={this.handleTextSubmit}\n        onClick={() => {\n          this.setState({ emojiOpen: false })\n        }}\n      >\n        <Header\n          leftImg=\"back\"\n          rightImg=\"\"\n          rightText=\"\"\n          leftLink={`/ChatList/${this.state.userId}`}\n          name={this.state.name}\n          onRightClick={() => {}}\n        />\n        <div\n          className={formStyles.the_chat}\n          style={this.state.chatStyle}\n          onDragEnter={this.handleDragEnter}\n          onDragLeave={this.handleDragLeave}\n          onDragOver={this.handleDragOver}\n          onDrop={this.handleDrop}\n          ref={this.messages}\n        >\n          {this.state.messages}\n        </div>\n        {emojiWindow}\n        {formInput}\n        <div className={formStyles.empty} />\n      </form>\n    )\n  }\n}\n\nMessageForm.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  match: PropTypes.object.isRequired,\n}\n\nexport default MessageForm\n","import React from 'react'\nimport autoBind from 'react-autobind'\nimport PropTypes from 'prop-types'\nimport Cookies from 'js-cookie'\nimport Header from './Header'\nimport { baseServer } from '../settings'\nimport profileStyles from '../styles/profileAndCreateStyles.module.scss'\nimport profilePic from '../images/profilePic.png'\nimport checkAuth from '../static/checkAuth'\n\nclass UserProfile extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      initialUserName: '',\n      initialUserTag: '',\n      initialUserBio: '',\n      currentUserName: '',\n      currentUserTag: '',\n      currentUserBio: '',\n      oldPassword: '',\n      newPassword: '',\n      changePassword: 0,\n      userId: Number(this.props.match.params.userId),\n      isTick: false,\n    }\n\n    autoBind(this)\n  }\n\n  componentDidMount() {\n    checkAuth(this.state.userId).then((auth) => {\n      if (!auth) {\n        window.location.hash = '#/'\n      } else {\n        fetch(`${baseServer}/users/profile/?id=${this.state.userId}`)\n          .then((res) => res.json())\n          .then((user) => {\n            this.setState({\n              initialUserName: user.name,\n              initialUserTag: user.tag,\n              initialUserBio: user.bio,\n              currentUserName: user.name,\n              currentUserTag: user.tag,\n              currentUserBio: user.bio,\n            })\n          })\n      }\n    })\n  }\n\n  onTickClick(event) {\n    event.preventDefault()\n\n    const toSend = {\n      name: this.state.currentUserName,\n      tag: this.state.currentUserTag,\n      bio: this.state.currentUserBio,\n      old_tag: this.state.initialUserTag,\n    }\n\n    fetch(`${baseServer}/users/set_user/`, {\n      method: 'POST',\n      body: JSON.stringify(toSend),\n      headers: {\n        'X-CSRFToken': Cookies.get('csrftoken'),\n      },\n    })\n      .then((res) => res.ok)\n      .then((accept) => {\n        if (accept) {\n          this.setState((state) => {\n            return {\n              initialUserName: state.currentUserName,\n              initialUserTag: state.currentUserTag,\n              initialUserBio: state.currentUserBio,\n              isTick: false,\n            }\n          })\n        } else {\n          this.setState((state) => {\n            return {\n              currentUserName: state.initialUserName,\n              currentUserTag: state.initialUserTag,\n              currentUserBio: state.initialUserBio,\n              isTick: false,\n            }\n          })\n        }\n        return this.state.initialUserTag\n      })\n      .then((tag) => {\n        if (this.state.newPassword !== '') {\n          const forPassChange = {\n            old_password: this.state.oldPassword,\n            new_password: this.state.newPassword,\n            tag,\n          }\n          fetch(`${baseServer}/users/change_password/`, {\n            method: 'POST',\n            body: JSON.stringify(forPassChange),\n            headers: {\n              'X-CSRFToken': Cookies.get('csrftoken'),\n            },\n          }).then((result) => {\n            this.setState({ newPassword: '', oldPassword: '', changePassword: result.ok ? 1 : 2 })\n          })\n        }\n      })\n  }\n\n  openPasswordForm(event) {\n    event.preventDefault()\n    this.setState({ changePassword: 0 })\n  }\n\n  handleChangeName(event) {\n    event.preventDefault()\n    const temp = event.target.value\n    this.setState((state) => {\n      return { currentUserName: temp, isTick: state.initialUserName !== temp }\n    })\n  }\n\n  handleChangeTag(event) {\n    event.preventDefault()\n    const temp = event.target.value\n    this.setState((state) => {\n      return { currentUserTag: temp, isTick: state.initialUserTag !== temp }\n    })\n  }\n\n  handleChangOldPassword(event) {\n    event.preventDefault()\n    this.setState({ oldPassword: event.target.value })\n  }\n\n  handleChangNewPassword(event) {\n    event.preventDefault()\n    this.setState({ newPassword: event.target.value, isTick: true })\n  }\n\n  handleChangeBio(event) {\n    event.preventDefault()\n    const temp = event.target.value\n    this.setState((state) => {\n      return { currentUserBio: temp, isTick: state.initialUserBio !== temp }\n    })\n  }\n\n  render() {\n    const containerStyles = `${profileStyles.container} ${profileStyles.profileAnim}`\n    const nameInputClasses = `${profileStyles.input} ${profileStyles.inputName}`\n    const tagInputClasses = `${profileStyles.input} ${profileStyles.inputTag}`\n    const bioInputClasses = `${profileStyles.input} ${profileStyles.inputBio}`\n    const passwordTextClasses = `${profileStyles.horizontal} ${profileStyles.interactiveText}`\n\n    let passwordForm\n\n    if (this.state.changePassword === 0) {\n      passwordForm = (\n        <div className={profileStyles.horizontal} style={{ flexGrow: 0 }}>\n          <input\n            type=\"text\"\n            value={this.state.oldPassword}\n            placeholder=\"Old password\"\n            className={`${profileStyles.input} ${profileStyles.inputPassword}`}\n            onChange={this.handleChangOldPassword.bind(this)}\n          />\n          <div className={profileStyles.empty} />\n          <input\n            type=\"text\"\n            value={this.state.newPassword}\n            placeholder=\"New password\"\n            className={`${profileStyles.input} ${profileStyles.inputPassword}`}\n            onChange={this.handleChangNewPassword.bind(this)}\n          />\n        </div>\n      )\n    } else if (this.state.changePassword === 1) {\n      passwordForm = (\n        <div className={passwordTextClasses} onClick={this.openPasswordForm}>\n          Password successfully changed!\n        </div>\n      )\n    } else {\n      passwordForm = (\n        <div className={passwordTextClasses} onClick={this.openPasswordForm}>\n          Could not change password. Tap to try again.\n        </div>\n      )\n    }\n\n    return (\n      <div className={containerStyles}>\n        <Header\n          leftImg=\"back\"\n          leftLink={`/ChatList/${this.state.userId}`}\n          rightImg={this.state.isTick ? 'tick' : ''}\n          rightText=\"\"\n          name=\"Edit Profile\"\n          onRightClick={this.state.isTick ? this.onTickClick : () => {}}\n        />\n        <div className={profileStyles.horizontal}>\n          <div className={profileStyles.vertical}>\n            <div className={profileStyles.horizontalPhoto}>\n              <div className={profileStyles.photo}>\n                <img src={profilePic} alt=\"\" className=\"pic\" height=\"130px\" width=\"height\" />\n              </div>\n            </div>\n            <input\n              type=\"text\"\n              value={this.state.currentUserName}\n              placeholder=\"Your name\"\n              className={nameInputClasses}\n              onChange={this.handleChangeName}\n            />\n            <input\n              type=\"text\"\n              value={this.state.currentUserTag}\n              placeholder=\"Your tag\"\n              className={tagInputClasses}\n              onChange={this.handleChangeTag}\n            />\n            <textarea\n              value={this.state.currentUserBio}\n              placeholder=\"Tell something about yourself\"\n              className={bioInputClasses}\n              onChange={this.handleChangeBio}\n            />\n            {passwordForm}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nUserProfile.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  match: PropTypes.object.isRequired,\n}\n\nexport default UserProfile\n","import React from 'react'\nimport autoBind from 'react-autobind'\nimport { Link } from 'react-router-dom'\nimport Cookies from 'js-cookie'\nimport { baseServer } from '../settings'\nimport welcomePageStyles from '../styles/welcomePageStyles.module.scss'\n\nclass WelcomePage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      messageType: 0,\n      tag: '',\n      password: '',\n    }\n\n    autoBind(this)\n\n    this.passwordInput = React.createRef()\n  }\n\n  componentDidMount() {\n    fetch(`${baseServer}/csrf/`)\n      .then((res) => res.json())\n      .then(({ csrfToken }) => {\n        document.cookie = `csrftoken=${csrfToken}`\n      })\n  }\n\n  getMessage() {\n    if (this.state.messageType === 0) {\n      return (\n        <div className={welcomePageStyles.content}>\n          Thank you for choosing Hummingbird!\n          <br />\n          Enter your tag and password.\n          <br />\n          Then tap anywhere to continue.\n        </div>\n      )\n    }\n\n    return (\n      <div className={welcomePageStyles.content}>\n        Incorrect tag of password.\n        <br />\n        Try again.\n      </div>\n    )\n  }\n\n  handleTagChange(event) {\n    event.preventDefault()\n    this.setState({ tag: event.target.value })\n  }\n\n  handlePasswordChange(event) {\n    event.preventDefault()\n    this.setState({ password: event.target.value })\n  }\n\n  handleTagSubmit(event) {\n    event.preventDefault()\n    if (this.state.password === '') {\n      this.passwordInput.current.focus()\n    } else {\n      this.handleAuth(event)\n    }\n  }\n\n  handleAuth(event) {\n    event.preventDefault()\n\n    const csrftoken = Cookies.get('csrftoken')\n\n    const toSend = {\n      tag: this.state.tag,\n      password: this.state.password,\n      csrfmiddlewaretoken: csrftoken,\n    }\n\n    fetch(`${baseServer}/users/auth/`, {\n      method: 'POST',\n      // credentials: 'include',\n      headers: {\n        'X-CSRFToken': csrftoken,\n        cookie: { csrftoken },\n      },\n      body: JSON.stringify(toSend),\n    })\n      .then((res) => (res.ok ? res.json() : Promise.reject(res)))\n      .then(({ id }) => {\n        window.location.hash = `#/ChatList/${id}`\n      })\n      .catch(() => {\n        this.setState({ messageType: 1 })\n      })\n  }\n\n  render() {\n    return (\n      <div className={welcomePageStyles.vert} onClick={this.handleAuth}>\n        <div className={welcomePageStyles.horiz}>\n          <div className={welcomePageStyles.curr_message}>\n            {this.getMessage()}\n            <div className={welcomePageStyles.time}>2:39</div>\n          </div>\n        </div>\n        <div className={welcomePageStyles.empty} />\n        <div className={welcomePageStyles.horiz}>\n          <form onSubmit={this.handleTagSubmit} className={welcomePageStyles.form}>\n            <input\n              type=\"text\"\n              value={this.state.tag}\n              placeholder=\"Enter your tag\"\n              className={welcomePageStyles.input}\n              onChange={this.handleTagChange}\n              onClick={(event) => {\n                event.stopPropagation()\n                return false\n              }}\n            />\n          </form>\n        </div>\n        <div\n          className={welcomePageStyles.empty}\n          onClick={(event) => {\n            event.stopPropagation()\n            return false\n          }}\n        />\n        <div className={welcomePageStyles.horiz}>\n          <form onSubmit={this.handleAuth} className={welcomePageStyles.form}>\n            <input\n              type=\"password\"\n              value={this.state.password}\n              placeholder=\"Enter your password\"\n              className={welcomePageStyles.input}\n              onChange={this.handlePasswordChange}\n              onClick={(event) => {\n                event.stopPropagation()\n                return false\n              }}\n              ref={this.passwordInput}\n            />\n          </form>\n        </div>\n        <div\n          className={welcomePageStyles.empty}\n          onClick={(event) => {\n            event.stopPropagation()\n            return false\n          }}\n        />\n        <Link\n          to=\"/CreateUser\"\n          className={welcomePageStyles.create}\n          onClick={(event) => {\n            event.stopPropagation()\n            return false\n          }}\n        >\n          Don&apos;t have an account? Become a hummingbird!\n        </Link>\n      </div>\n    )\n  }\n}\n\nexport default WelcomePage\n","import React from 'react'\nimport autoBind from 'react-autobind'\nimport Cookies from 'js-cookie'\nimport Header from './Header'\nimport { baseServer } from '../settings'\nimport profileStyles from '../styles/profileAndCreateStyles.module.scss'\nimport imagesStyles from '../styles/imagesStyles.module.scss'\n\nclass CreateUser extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      userName: '',\n      userTag: '',\n      userBio: '',\n      firstPassword: '',\n      secondPassword: '',\n      isPasswordForm: 0,\n      isTagForm: 0,\n      isTick: false,\n    }\n\n    autoBind(this)\n  }\n\n  onTickClick(event) {\n    event.preventDefault()\n\n    if (this.state.firstPassword !== this.state.secondPassword) {\n      this.setState({ isPasswordForm: 1 })\n      return\n    }\n\n    const toSend = {\n      name: this.state.userName,\n      tag: this.state.userTag,\n      bio: this.state.userBio,\n      password: this.state.firstPassword,\n    }\n\n    fetch(`${baseServer}/users/create_user/`, {\n      method: 'POST',\n      body: JSON.stringify(toSend),\n      headers: {\n        'X-CSRFToken': Cookies.get('csrftoken'),\n      },\n    }).then((res) => {\n      if (res.ok) {\n        res.json().then(({ id }) => {\n          window.location.hash = `#/ChatList/${id[0].id}`\n        })\n      } else {\n        this.setState({ isTagForm: 1 })\n      }\n    })\n  }\n\n  setTick(string) {\n    if (string === '') {\n      this.setState({ isTick: false })\n    } else {\n      this.setState((state) => {\n        const f = state.userTag !== '' && state.firstPassword !== '' && state.secondPassword !== ''\n        return { isTick: f }\n      })\n    }\n  }\n\n  getPasswordForm() {\n    const textClasses = `${profileStyles.horizontal} ${profileStyles.interactiveText}`\n\n    if (this.state.isPasswordForm === 0) {\n      return (\n        <div className={profileStyles.horizontal} style={{ flexGrow: 0 }}>\n          <input\n            type=\"text\"\n            value={this.state.firstPassword}\n            placeholder=\"Enter password\"\n            className={`${profileStyles.input} ${profileStyles.inputPassword}`}\n            onChange={this.handleChangeFirstPassword.bind(this)}\n          />\n          <div className={profileStyles.empty} />\n          <input\n            type=\"text\"\n            value={this.state.secondPassword}\n            placeholder=\"Repeat password\"\n            className={`${profileStyles.input} ${profileStyles.inputPassword}`}\n            onChange={this.handleChangeSecondPassword.bind(this)}\n          />\n        </div>\n      )\n    }\n    return (\n      <div className={textClasses} onClick={this.openPasswordForm}>\n        Passwords don&apos;t match. Tap to try again.\n      </div>\n    )\n  }\n\n  getTagForm() {\n    const tagInputClasses = `${profileStyles.input} ${profileStyles.inputTag}`\n    const textClasses = `${profileStyles.horizontal} ${profileStyles.interactiveText}`\n\n    if (this.state.isTagForm === 0) {\n      return (\n        <input\n          type=\"text\"\n          value={this.state.userTag}\n          placeholder=\"Your tag\"\n          className={tagInputClasses}\n          onChange={this.handleChangeTag}\n        />\n      )\n    }\n    return (\n      <div className={textClasses} style={{ margin: '30px 0', flexGrow: 0 }} onClick={this.openTagForm}>\n        This tag already exists. Tap to choose another tag.\n      </div>\n    )\n  }\n\n  openPasswordForm(event) {\n    event.preventDefault()\n    this.setState({ firstPassword: '', secondPassword: '', isPasswordForm: 0, isTick: false })\n  }\n\n  openTagForm(event) {\n    event.preventDefault()\n    this.setState({ userTag: '', isTagForm: 0, isTick: false })\n  }\n\n  handleChangeName(event) {\n    event.preventDefault()\n    this.setState({ userName: event.target.value })\n    this.setTick(event.target.value)\n  }\n\n  handleChangeTag(event) {\n    event.preventDefault()\n    this.setState({ userTag: event.target.value })\n    this.setTick(event.target.value)\n  }\n\n  handleChangeBio(event) {\n    event.preventDefault()\n    this.setState({ userBio: event.target.value })\n  }\n\n  handleChangeFirstPassword(event) {\n    event.preventDefault()\n    this.setState({ firstPassword: event.target.value })\n    this.setTick(event.target.value)\n  }\n\n  handleChangeSecondPassword(event) {\n    event.preventDefault()\n    this.setState({ secondPassword: event.target.value })\n    this.setTick(event.target.value)\n  }\n\n  render() {\n    const containerStyles = `${profileStyles.container} ${profileStyles.createUserAnim}`\n    const nameInputClasses = `${profileStyles.input} ${profileStyles.inputName}`\n    const bioInputClasses = `${profileStyles.input} ${profileStyles.inputBio}`\n\n    return (\n      <div className={containerStyles}>\n        <Header\n          leftImg=\"back\"\n          rightImg={this.state.isTick ? 'tick' : ''}\n          rightText=\"\"\n          leftLink=\"/\"\n          name=\"Create an account\"\n          onRightClick={this.state.isTick ? this.onTickClick : () => {}}\n        />\n        <div className={profileStyles.horizontal}>\n          <div className={profileStyles.vertical}>\n            <div className={profileStyles.horizontalPhoto}>\n              <div className={profileStyles.photo}>\n                <div className={`${imagesStyles.profilePic} ${imagesStyles.profilePicSizeChatList} pic`} />\n              </div>\n            </div>\n            <input\n              type=\"text\"\n              value={this.state.userName}\n              placeholder=\"Your name\"\n              className={nameInputClasses}\n              onChange={this.handleChangeName}\n            />\n            {this.getTagForm()}\n            <textarea\n              value={this.state.userBio}\n              placeholder=\"Tell something about yourself\"\n              className={bioInputClasses}\n              onChange={this.handleChangeBio}\n            />\n            {this.getPasswordForm()}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CreateUser\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport autoBind from 'react-autobind'\nimport Cookies from 'js-cookie'\nimport Header from './Header'\nimport { baseServer } from '../settings'\nimport profileStyles from '../styles/profileAndCreateStyles.module.scss'\nimport profilePic from '../images/profilePic.png'\nimport checkAuth from '../static/checkAuth'\n\nclass CreateChat extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      chatName: '',\n      chatTag: '',\n      chatBio: '',\n      chatMembers: '',\n      userId: Number(this.props.match.params.userId),\n      isTagForm: 0,\n      isNameForm: 0,\n      isInfoForm: 0,\n      isMembersForm: 0,\n    }\n\n    autoBind(this)\n  }\n\n  componentDidMount() {\n    checkAuth(this.state.userId).then((auth) => {\n      if (!auth) {\n        window.location.hash = '#/'\n      }\n    })\n  }\n\n  onFillInfo(event) {\n    event.preventDefault()\n\n    if (this.state.chatName === '') {\n      this.setState({ isNameForm: 1 })\n      return\n    }\n\n    if (this.state.chatTag === '') {\n      this.setState({ isTagForm: 2 })\n      return\n    }\n\n    this.setState({ isInfoForm: 1 })\n  }\n\n  onCreate(event, isChannel) {\n    event.preventDefault()\n\n    if (this.state.chatMembers === '') {\n      this.setState({ isMembersForm: 2 })\n      return\n    }\n\n    const toSend = {\n      name: this.state.chatName,\n      tag: this.state.chatTag,\n      bio: this.state.chatBio,\n      creator: this.state.userId,\n      members: this.state.chatMembers,\n      is_channel: isChannel,\n    }\n\n    fetch(`${baseServer}/chats/create_chat/`, {\n      method: 'POST',\n      body: JSON.stringify(toSend),\n      headers: {\n        'X-CSRFToken': Cookies.get('csrftoken'),\n      },\n    }).then((res) => {\n      if (res.ok) {\n        let realTag = this.state.chatTag.replace(' ', '')\n        if (realTag[0] !== '@') {\n          realTag = `@${realTag}`\n        }\n\n        window.location.hash = `#/MessageForm/${realTag}/${this.state.chatName}/${this.state.userId}`\n      } else {\n        this.setState({ isMembersForm: 1 })\n      }\n    })\n  }\n\n  openTagForm(event) {\n    event.preventDefault()\n    this.setState({ chatTag: '', isTagForm: 0 })\n  }\n\n  openNameForm(event) {\n    event.preventDefault()\n    this.setState({ isNameForm: 0 })\n  }\n\n  openMemberForm(event) {\n    event.preventDefault()\n    this.setState({ isMembersForm: 0 })\n  }\n\n  handleChangeName(event) {\n    event.preventDefault()\n    this.setState({ chatName: event.target.value })\n  }\n\n  handleChangeTag(event) {\n    event.preventDefault()\n    this.setState({ chatTag: event.target.value })\n  }\n\n  handleChangeBio(event) {\n    event.preventDefault()\n    this.setState({ chatBio: event.target.value })\n  }\n\n  handleChangeMembers(event) {\n    event.preventDefault()\n    this.setState({ chatMembers: event.target.value })\n  }\n\n  render() {\n    const containerStyles = `${profileStyles.container} ${profileStyles.createChatAnim}`\n    const nameInputClasses = `${profileStyles.input} ${profileStyles.inputName}`\n    const tagInputClasses = `${profileStyles.input} ${profileStyles.inputTag}`\n    const bioInputClasses = `${profileStyles.input} ${profileStyles.inputBio}`\n    const textClasses = `${profileStyles.horizontal} ${profileStyles.interactiveText}`\n\n    let tagForm\n\n    if (this.state.isTagForm === 0) {\n      tagForm = (\n        <input\n          type=\"text\"\n          value={this.state.chatTag}\n          placeholder=\"Chat tag\"\n          className={tagInputClasses}\n          onChange={this.handleChangeTag}\n        />\n      )\n    } else if (this.state.isTagForm === 1) {\n      tagForm = (\n        <div className={textClasses} style={{ margin: '30px 0', flexGrow: 0 }} onClick={this.openTagForm}>\n          This tag already exists. Tap to choose another tag.\n        </div>\n      )\n    } else {\n      tagForm = (\n        <div className={textClasses} style={{ margin: '30px 0', flexGrow: 0 }} onClick={this.openTagForm}>\n          Your chat must have a tag. Tap to choose one.\n        </div>\n      )\n    }\n\n    let nameForm\n\n    if (this.state.isNameForm === 0) {\n      nameForm = (\n        <input\n          type=\"text\"\n          value={this.state.chatName}\n          placeholder=\"Chat name\"\n          className={nameInputClasses}\n          onChange={this.handleChangeName}\n        />\n      )\n    } else {\n      nameForm = (\n        <div className={textClasses} style={{ marginBottom: '40px', flexGrow: 0 }} onClick={this.openNameForm}>\n          Your chat must have a name. Tap to choose one.\n        </div>\n      )\n    }\n\n    let membersForm\n\n    if (this.state.isMembersForm === 0) {\n      membersForm = (\n        <input\n          type=\"text\"\n          value={this.state.chatMembers}\n          placeholder=\"Enter chat members\"\n          className={profileStyles.input}\n          onChange={this.handleChangeMembers}\n        />\n      )\n    } else if (this.state.isMembersForm === 1) {\n      membersForm = (\n        <div className={textClasses} style={{ marginBottom: '20px', flexGrow: 0 }} onClick={this.openMemberForm}>\n          Some users don&apos;t exist. Tap to try again.\n        </div>\n      )\n    } else {\n      membersForm = (\n        <div className={textClasses} style={{ marginBottom: '20px', flexGrow: 0 }} onClick={this.openMemberForm}>\n          Your chat must have members. Tap to choose.\n        </div>\n      )\n    }\n\n    let mainPart\n\n    if (this.state.isInfoForm === 0) {\n      mainPart = (\n        <div className={profileStyles.vertical}>\n          <div className={profileStyles.horizontalPhoto}>\n            <div className={profileStyles.photo}>\n              <img src={profilePic} alt=\"\" className=\"pic\" height=\"130px\" width=\"height\" />\n            </div>\n          </div>\n          {nameForm}\n          {tagForm}\n          <textarea\n            value={this.state.chatBio}\n            placeholder=\"Tell something about your chat\"\n            className={bioInputClasses}\n            onChange={this.handleChangeBio}\n          />\n          <div className={profileStyles.horizontal} style={{ flexGrow: 0 }}>\n            <div className={textClasses} onClick={this.onFillInfo}>\n              Proceed to adding members\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n      mainPart = (\n        <div className={profileStyles.vertical} style={{ alignSelf: 'center' }}>\n          {membersForm}\n          <div className={profileStyles.horizontal} style={{ flexGrow: 0, marginTop: '15px' }}>\n            <div className={textClasses} onClick={(event) => this.onCreate(event, false)}>\n              Create a chat\n            </div>\n            <div className={profileStyles.empty} />\n            <div className={textClasses} onClick={(event) => this.onCreate(event, true)}>\n              Create a channel\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div className={containerStyles}>\n        <Header\n          leftImg=\"back\"\n          leftLink={`/ChatList/${this.state.userId}`}\n          rightImg=\"\"\n          rightText=\"\"\n          name=\"Create a chat\"\n          onRightClick={() => {}}\n        />\n        <div className={profileStyles.horizontal}>{mainPart}</div>\n      </div>\n    )\n  }\n}\n\nCreateChat.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  match: PropTypes.object.isRequired,\n}\n\nexport default CreateChat\n","import React from 'react'\nimport { Route, HashRouter as Router, Switch } from 'react-router-dom'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport * as Sentry from '@sentry/browser'\nimport store from './store/index'\nimport './styles/globalStyles.css'\nimport * as serviceWorker from './utils/serviceWorker'\nimport ChatList from './components/ChatList'\nimport MessageForm from './components/MessageForm'\nimport UserProfile from './components/UserProfile'\nimport WelcomePage from './components/WelcomePage'\nimport CreateUser from './components/CreateUser'\nimport CreateChat from './components/CreateChat'\n\nSentry.init({ dsn: 'https://b0b762b80c4f4b6483a00e55349a665d@o388306.ingest.sentry.io/5224990' })\n\nrender(\n  <Provider store={store}>\n    <Router basename=\"/\">\n      <Switch>\n        <Route exact path=\"/\" component={WelcomePage} />\n        <Route path=\"/CreateUser\" component={CreateUser} />\n        <Route path=\"/ChatList/:userId\" component={ChatList} />\n        <Route path=\"/MessageForm/:tag/:name/:userId\" component={MessageForm} />\n        <Route path=\"/UserProfile/:userId\" component={UserProfile} />\n        <Route path=\"/CreateChat/:userId\" component={CreateChat} />\n      </Switch>\n    </Router>\n  </Provider>,\n  document.getElementById('root'),\n)\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"vert\":\"welcomePageStyles_vert__1d_zt\",\"scaleFromCenter\":\"welcomePageStyles_scaleFromCenter__2nekQ\",\"horiz\":\"welcomePageStyles_horiz__25skz\",\"content\":\"welcomePageStyles_content__3EfBu\",\"time\":\"welcomePageStyles_time__3Y13W\",\"curr_message\":\"welcomePageStyles_curr_message__2PIiB\",\"input\":\"welcomePageStyles_input__1k3Z5\",\"empty\":\"welcomePageStyles_empty__hxhEL\",\"form\":\"welcomePageStyles_form__HSnh7\",\"create\":\"welcomePageStyles_create__qRXYL\"};"],"sourceRoot":""}